(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3847:(e,a,r)=>{Promise.resolve().then(r.bind(r,9907))},9907:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>O});var t=r(4),s=r(3176),i=r(998),n=r(4552),l=r(5894),d=r(7399);function o(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,d.QP)((0,l.$)(a))}let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function u(e){let{className:a,variant:r,size:s,asChild:n=!1,...l}=e,d=n?i.DX:"button";return(0,t.jsx)(d,{"data-slot":"button",className:o(c({variant:r,size:s,className:a})),...l})}function g(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function m(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function x(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",a),...r})}function h(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:o("text-muted-foreground text-sm",a),...r})}function b(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:o("px-6",a),...r})}function v(e){let{className:a,type:r,...s}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...s})}var p=r(4160);function f(e){let{className:a,...r}=e;return(0,t.jsx)(p.b,{"data-slot":"label",className:o("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...r})}function j(e){let{className:a,...r}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:o("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...r})}let y=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function N(e){let{className:a,variant:r,asChild:s=!1,...n}=e,l=s?i.DX:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:o(y({variant:r}),a),...n})}var w=r(4759),k=r(3805),C=r(5555),S=r(7898),A=r(2476),D=r(3771),z=r(3088),E=r(1291),F=r(5013),I=r(1253);let _={happy:(0,t.jsx)(w.A,{className:"w-4 h-4 text-green-400"}),neutral:(0,t.jsx)(k.A,{className:"w-4 h-4 text-yellow-400"}),sad:(0,t.jsx)(C.A,{className:"w-4 h-4 text-red-400"})},R={happy:"Bien",neutral:"Regular",sad:"Mal"};function T(e){let{onCapture:a,onClose:r,devices:i}=e,n=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(null),[o,c]=(0,s.useState)(!1),[g,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),b=(0,s.useCallback)(async e=>{try{h(!0),d.current&&(d.current.getTracks().forEach(e=>e.stop()),d.current=null),n.current&&(n.current.srcObject=null);let a={video:{width:{ideal:1280},height:{ideal:720}}};e&&(a.video={...a.video,deviceId:{exact:e}});let r=await navigator.mediaDevices.getUserMedia(a);n.current&&(n.current.srcObject=r,d.current=r,c(!0))}catch(a){console.error("Error accessing camera:",a),e&&i.length>0?(console.log("Trying default camera..."),await b()):alert("No se pudo acceder a la c\xe1mara. Por favor, verifica los permisos.")}finally{h(!1)}},[i]),v=(0,s.useCallback)(()=>{d.current&&(d.current.getTracks().forEach(e=>e.stop()),d.current=null),n.current&&(n.current.srcObject=null),c(!1)},[]),p=(0,s.useCallback)(()=>{if(n.current&&l.current){let e=n.current,t=l.current,s=t.getContext("2d");s&&(t.width=e.videoWidth,t.height=e.videoHeight,s.drawImage(e,0,0,t.width,t.height),a(t.toDataURL("image/jpeg",.8)),v(),r())}},[a,r,v]),f=(0,s.useCallback)(async e=>{let a=e.target.value;m(a),v(),a?await b(a):await b()},[b,v]);return(0,s.useEffect)(()=>(i.length>0?(m(i[0].deviceId),b(i[0].deviceId)):b(),()=>v()),[i,b,v]),(0,t.jsx)("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 max-w-md w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Tomar Foto"}),(0,t.jsx)("p",{className:"text-gray-300 text-sm mb-3",children:"Posiciona tu comida en el encuadre"})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"camera-device-select",className:"text-sm text-gray-300",children:"Seleccionar c\xe1mara:"}),(0,t.jsx)("select",{id:"camera-device-select",className:"bg-gray-700 text-gray-200 rounded px-2 py-1 text-sm border border-gray-600 focus:outline-none",value:g||"",onChange:f,disabled:x,children:i.length>0?i.map(e=>(0,t.jsx)("option",{value:e.deviceId,children:e.label||"C\xe1mara ".concat(e.deviceId.slice(-4))},e.deviceId)):(0,t.jsx)("option",{value:"",children:"No hay c\xe1maras disponibles"})})]}),(0,t.jsx)("div",{className:"relative mb-4",children:(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-600/50",children:[(0,t.jsx)("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover bg-gray-900"}),(0,t.jsx)("canvas",{ref:l,className:"hidden"}),(!o||x)&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-orange-500/30 border-t-orange-500 rounded-full animate-spin mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-300 font-medium",children:x?"Cambiando c\xe1mara...":"Iniciando c\xe1mara..."})]})}),(0,t.jsx)("div",{className:"absolute top-1 right-1 flex items-center gap-2 z-10",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(o?"bg-green-400 animate-pulse":"bg-gray-400")})}),(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-9",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4 w-6 h-6 border-l-2 border-t-2 border-orange-400 rounded-tl-lg"}),(0,t.jsx)("div",{className:"absolute top-4 right-4 w-6 h-6 border-r-2 border-t-2 border-orange-400 rounded-tr-lg"}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 w-6 h-6 border-l-2 border-b-2 border-orange-400 rounded-bl-lg"}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 w-6 h-6 border-r-2 border-b-2 border-orange-400 rounded-br-lg"})]})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(u,{onClick:p,disabled:!o||x,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white",children:[(0,t.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Capturar"]}),(0,t.jsx)(u,{onClick:r,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancelar"})]})]})})}function O(){let[e,a]=(0,s.useState)([]),[r,i]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[c,p]=(0,s.useState)("neutral"),[y,w]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1),[O,P]=(0,s.useState)([]);return(0,s.useEffect)(()=>{navigator.mediaDevices.enumerateDevices().then(e=>{P(e.filter(e=>"videoinput"===e.kind).map(e=>({deviceId:e.deviceId,label:e.label})))})},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Diario de Comidas"}),(0,t.jsx)("p",{className:"text-gray-300 text-lg",children:"Registra tus comidas y c\xf3mo te hacen sentir"})]}),(0,t.jsxs)(g,{className:"mb-8 bg-gray-800 border-gray-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(x,{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(A.A,{className:"w-5 h-5 text-orange-400"}),"Registra tu Comida"]}),(0,t.jsx)(h,{className:"text-gray-300",children:"Anota lo que comiste y c\xf3mo te hizo sentir"})]}),(0,t.jsx)(b,{children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!r.trim())return;let t={id:Date.now().toString(),food:r.trim(),time:new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),date:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),feeling:n.trim(),notes:d.trim(),mood:c,image:y||void 0};a(e=>[t,...e]),i(""),l(""),o(""),p("neutral"),w(null)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f,{htmlFor:"food",className:"text-gray-200",children:"\xbfQu\xe9 comiste?"}),(0,t.jsx)(v,{id:"food",value:r,onChange:e=>i(e.target.value),placeholder:"ej., Ensalada de pollo a la plancha con aguacate",className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f,{className:"text-gray-200",children:"Foto de la comida (opcional)"}),(0,t.jsxs)("div",{className:"space-y-4",children:[y?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:y||"/placeholder.svg",alt:"Comida seleccionada",className:"w-full h-48 object-cover rounded-lg border border-gray-600"}),(0,t.jsx)(u,{type:"button",variant:"destructive",size:"sm",onClick:()=>{w(null)},className:"absolute top-2 right-2",children:(0,t.jsx)(D.A,{className:"w-4 h-4"})})]}):(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(f,{onClick:()=>C(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,t.jsx)(S.A,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-300",children:"Tomar Foto"})]}),(0,t.jsxs)(f,{htmlFor:"upload-input",className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,t.jsx)(z.A,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-300",children:"Subir Foto"})]})]}),(0,t.jsx)(v,{id:"upload-input",type:"file",accept:"image/*",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){let e=new FileReader;e.onload=e=>{var a;w(null===(a=e.target)||void 0===a?void 0:a.result)},e.readAsDataURL(r)}},className:"hidden"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f,{className:"text-gray-200",children:"\xbfC\xf3mo te sent\xf3?"}),(0,t.jsx)("div",{className:"flex gap-4",children:["happy","neutral","sad"].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>p(e),className:"flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ".concat(c===e?"bg-orange-500 text-white border-orange-500":"bg-gray-700 border-gray-600 hover:bg-gray-600 text-gray-200"),children:[_[e],(0,t.jsx)("span",{children:R[e]})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f,{htmlFor:"notes",className:"text-gray-200",children:"Notas adicionales (opcional)"}),(0,t.jsx)(j,{id:"notes",value:d,onChange:e=>o(e.target.value),placeholder:"Cualquier otro pensamiento u observaci\xf3n...",className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400 min-h-[80px]"})]}),(0,t.jsx)(u,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white",children:"Guardar Entrada"})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Tu Diario de Comidas"}),e.length>0&&(0,t.jsxs)(N,{variant:"outline",className:"text-sm border-gray-600 text-gray-300",children:[e.length," ",1===e.length?"entrada":"entradas"]})]}),0===e.length?(0,t.jsx)(g,{className:"bg-gray-800 border-gray-700",children:(0,t.jsx)(b,{className:"py-12 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-700 flex items-center justify-center",children:(0,t.jsx)(E.A,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-300 text-lg font-medium mb-1",children:"A\xfan no hay entradas"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"\xa1Comienza registrando tu primera comida arriba!"})]})]})})}):(0,t.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,t.jsx)(g,{className:"bg-gray-800 border-gray-700 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow",children:(0,t.jsxs)(b,{className:"p-0",children:[e.image&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.food,className:"w-full h-56 object-cover rounded-t-lg"}),(0,t.jsx)("div",{className:"absolute top-3 right-3 bg-gray-900/90 backdrop-blur-sm rounded-full p-2",children:_[e.mood]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-white mb-2 leading-tight",children:e.food}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(F.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.date})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(I.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.time})]})]})]}),!e.image&&(0,t.jsx)("div",{className:"flex items-center gap-1 bg-gray-700 rounded-full p-2",children:_[e.mood]})]}),e.feeling&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-400",children:"C\xf3mo te sentiste"})]}),(0,t.jsx)(N,{className:"bg-orange-500/20 text-orange-300 border-orange-500/30 font-medium",children:e.feeling})]}),e.notes&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-400",children:"Notas"})]}),(0,t.jsx)("p",{className:"text-gray-200 text-sm leading-relaxed bg-gray-700/50 rounded-lg p-3",children:e.notes})]})]})]})},e.id))})]})]}),k&&(0,t.jsx)(T,{onCapture:e=>{w(e)},onClose:()=>C(!1),devices:O})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[680,476,571,358],()=>a(3847)),_N_E=e.O()}]);